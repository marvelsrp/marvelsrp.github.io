<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>WebView Interface Test</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
      }
      .log {
        margin-top: 20px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>üîç WebView Interface Test</h1>
    <p>
      –≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ JS-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ WebView,
      —Ç–∞–∫–∏–µ –∫–∞–∫ <code>Android</code>, <code>AndroidBridge</code>,
      <code>JSInterface</code> –∏ –¥—Ä—É–≥–∏–µ.
    </p>

    <div class="log" id="log">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞...</div>

    <script>
      const namesToTest = [
        "Android",
        "AndroidBridge",
        "JSInterface",
        "MyApp",
        "Bridge",
        "Native",
        "NavBridge",
        "AppMetrica",
        "AppMetricaInitializer",
        "observer",
        "AndroidSDKInterface",
        "MyApp",
        "AnalyticsWebInterface",
        "MobileApp",
        "JsBridge",
        "AndroidProfileSDK",
        "parent",
      ];
      const log = document.getElementById("log");

      let output = '';
      for (const name of namesToTest) {
        try {
          if (
            typeof window[name] === "object" ||
            typeof window[name] === "function"
          ) {

            const obj = window[name];
            const props = [];
            for (let prop in obj) {
              try {
                const type = typeof obj[prop];
                props.push(`<li>${name}.${prop} (${type}) ${JSON.stringify(obj[prop], null, 2)}</li>`);
              } catch (e) {
                props.push(`  ‚Ä¢ ${prop} (–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: ${e})`);
              }
            }
            if (props.length === 0) {
              output += '  ‚ö†Ô∏è –°–≤–æ–π—Å—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –∏–ª–∏ —Å–∫—Ä—ã—Ç—ã.\n';
            } else {
              output += props.join('<br/>') + '<br/>';
            }
            log.innerHTML = output;

          }
        } catch (e) {
          // ignore errors
        }
      }


      function testProc() {
        fetch("file:///proc/version")
          .then((r) => r.text())
          .then((data) => {
            alert(JSON.stringify(data));
          });
      }
      function testLS() {
        fetch(
          "file:///data/data/ru.mts.mymts/app_webview/Default/Local Storage",
        )
          .then((r) => r.text())
          .then((data) => {
            alert(JSON.stringify(data));
          });
      }
    </script>
    <button onclick="testProc()">testProc</button>
    <button onclick="testLS()">testLS</button>
  </body>
</html>
