<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pentest script generator</title>
    <style>
        fieldset {
            display: flex;
            flex-direction: column;
            outline: none;
            border: none;
            padding: 10px 20px ;
        }
        fieldset label{
            width: 100px;
            display: flex;
        }
        fieldset input, fieldset textarea{
            display: flex;
            font-family: monospace;
        }
        #output {
            padding: 10px 20px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <fieldset>
        <label>Project</label>
        <input name="project" />
    </fieldset>
    <fieldset>
        <label>Domains</label>
        <textarea name="domainList"  style="width: 50vw; height: 100px"></textarea>
    </fieldset>
    <div id="output" style="height: auto; min-height: 300px; width: 100vw; border: 1px solid silver;">

    </div>
    <script>
        let area = document.querySelector('textarea');
        area.addEventListener('input', function(e) {
            renderScripts();

        }, false);
        function renderScripts () {
            const project = document.getElementsByName('project')[0].value;
            const domains = document.getElementsByName('domainList')[0].value.split('\n');
            let commands = `mkdir projects/${project} \n`;
            domains.forEach(domain => {
                commands += `mkdir projects/${project}/${domain} \n`;
            });
            commands += `cp template/*.sh projects/${project} \n`;
            commands += `cd projects/${project} \n`;
            commands += `git init && git add . && git commit -m 'init'\n`;


            domains.forEach(domain => {
                commands += ` \n============${domain}============== \n\n`;
                commands += `sudo nmap --min-rate=500 -sS -sU -sV --version-all -O -A -T4 -p 1-65535 -oX${domain}/nmap.xml ${domain} \n`;
                commands += `xsltproc ${domain}/nmap.xml -o ${domain}/nmap.html\n`;
                commands += `sudo python3 ../../packages/theHarvester/theHarvester.py -d ${domain} -l 100 -b all | tee -a ${domain}/theHarvester.txt \n`;
                commands += `sudo python3 ../../packages/XSStrike/xsstrike.py -u https://${domain}/ --crawl -l 2 -t 30 --blind --file-log-level INFO --log-file ${domain}/xsstrike.txt \n`;
                commands += `bbot -t ${domain} -m httpx -f web-basic web-advanced -c web_spider_distance=2 web_spider_depth=2 --output-dir ./${domain} --force`;
                commands += `bbot -t ${domain} --flags subdomain-enum --install-all-deps --output-module json,asset_inventory --output-dir ./${domain}/bbot-subdomains \n`;
                commands += `bbot -t ${domain} --flags web-basic,web-screenshots --modules naabu gowitness --install-all-deps  --config web_spider_distance=2 web_spider_depth=2 --output-module json,asset_inventory --output-dir ./${domain}/bbot-spider \n`;

                commands += ` zap?\n`;
                commands += ` burp?\n`;
                commands += ` xsser?\n`;
                commands += ` gitGraber?\n`;
                commands += ` Oralyzer?\n`;
                commands += ` ParamSpider +sqlmap?\n`;
                commands += ` V3n0M-Scanner?\n`;
            });

            console.log(commands);
            document.getElementById('output').innerText = commands;

        }
    </script>
</body>
</html>