<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pentest script generator</title>
    <style>
        fieldset {
            display: flex;
            flex-direction: column;
            outline: none;
            border: none;
            padding: 10px 20px ;
        }
        fieldset label{
            width: 100px;
            display: flex;
        }
        fieldset input, fieldset textarea{
            display: flex;
        }
        #output {
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <fieldset>
        <label>Project</label>
        <input name="project" />
    </fieldset>
    <fieldset>
        <label>Domains</label>
        <textarea name="domainList"  style="width: 50vw; height: 100px"></textarea>
    </fieldset>
    <div id="output" style="height: auto; min-height: 300px; width: 100vw; border: 1px solid silver;">

    </div>
    <script>
        let area = document.querySelector('textarea');
        area.addEventListener('input', function(e) {
            renderScripts();

        }, false);
        function renderScripts () {
            const project = document.getElementsByName('project')[0].value;
            const domains = document.getElementsByName('domainList')[0].value.split('\n');
            let commands = `mkdir projects/${project} \n`;
            domains.forEach(domain => {
                commands += `mkdir projects/${project}/${domain} \n`;
            });
            commands += `cp template/*.sh projects/${project} \n`;
            commands += `cd projects/${project} \n`;
            commands += `git init && git add . && git commit -m 'init'\n`;


            domains.forEach(domain => {
                commands += `============${domain}============== \n`;
                commands += `sudo ../../packages/nmap.sh ${domain} \n`;
                commands += `python3 ../../packages/theHarvester/theHarvester.py -d ${domain} -l 100 -b all  -f ${domain}/theHarvester \n`;
                commands += `python3 ../../packages/XSStrike/xsstrike.py -u https://${domain}/ --crawl -l 2 -t 30 --blind --file-log-level INFO --log-file ${domain}/xsstrike.txt \n`;
            });

            console.log(commands);
            document.getElementById('output').innerText = commands;

        }
    </script>
</body>
</html>